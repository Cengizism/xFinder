<ion-view view-title="Locations">
    <ion-content>
        <ion-list>
            <ion-item class="search-bar">
                <label class="item item-input query">
                    <i class="icon ion-search placeholder-icon"></i>
                    <input type="text" placeholder="Search location in" ng-model="query"
                           ng-change="search(query, type)">
                </label>
                <i ng-click="reset()" class="icon ion-close" ng-show="query.length > 3"></i>
                <label class="item item-input item-select">
                    <select ng-model="type" ng-options="type for type in types"
                            ng-change="search(query, type)"></select>
                </label>
            </ion-item>

            <ion-item ng-show="alert.status" class="message">
                <i class="icon ion-refresh" ng-hide="alert.loading"></i>
                <div class="rotating" ng-show="alert.loading">
                    <div></div>
                </div>
                {{alert.message}}
            </ion-item>

            <ion-item class="item-remove-animate item-avatar item-icon-right"
                      ng-hide="alert.status" ng-show="(results.length > 0) && (query.length > 3)"
                      ng-repeat="result in results" type="item-text-wrap" href="#/tab/locations/{{$index}}">
                <img ng-src="img/icon-location-found.png">

                <h2>{{result.name}}</h2>

                <p>{{result.type | capitalize}}<span ng-show="result.distance">, {{result.distance}} km</span></p>
                <i class="icon ion-chevron-right icon-accessory"></i>
            </ion-item>

        </ion-list>
    </ion-content>
</ion-view>
